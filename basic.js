var camera,observer1,moonCamera,Earth,FlatEarth,canvas=document.getElementById("canvas"),sldAlpha=document.getElementById("sldAlpha"),txtAlpha=document.getElementById("txtalpha"),sldBeta=document.getElementById("sldBeta"),txtBeta=document.getElementById("txtbeta"),sldRadius=document.getElementById("sldRadius"),txtRadius=document.getElementById("txtradius"),sldFOV=document.getElementById("sldFOV"),txtFOV=document.getElementById("txtFOV"),sldy=document.getElementById("sldy"),txty=document.getElementById("txty");const earthRadius=6371,flatEarthRadius=20004,earthAxialTilt=24.5,moonRadius=1737.1,moonDistance=384400,moonPerigee=362600,moonApogee=405400,moonAxialTilt=0,moonOrbitalTilt=5.1454,sunRadius=0,sunDistance=1499e5,escala=.001;var engine=new BABYLON.Engine(canvas,!0),createScene=function(){var r=new BABYLON.Scene(engine);r.clearColor=new BABYLON.Color3(0,0,.5),camera=new BABYLON.ArcRotateCamera("Camera",0,Math.PI/2,17.242,new BABYLON.Vector3(0,0,0),r),r.activeCamera.attachControl(canvas),camera.lowerRadiusLimit=7.371,camera.wheelPrecision=150,camera.upperBetaLimit=Math.PI,camera.lowerBetaLimit=0,camera.fov=35*Math.PI/180;cielo=BABYLON.MeshBuilder.CreateSphere("cielo",{segments:30,diameter:12e3,sideOrientation:BABYLON.Mesh.DOUBLESIDE},r);var a=new BABYLON.StandardMaterial("estrellas",r);a.diffuseTexture=new BABYLON.Texture("/starmapHQ.jpg",r),a.disableLighting=!0,a.emissiveColor=new BABYLON.Color3(1,1,1),a.diffuseTexture.uScale=1,a.diffuseTexture.vScale=-1,cielo.material=a,Earth=BABYLON.MeshBuilder.CreateSphere("Earth",{segments:40,diameter:12.742},r);var t=new BABYLON.StandardMaterial("myMaterial",r);t.diffuseTexture=new BABYLON.Texture("/lines.jpeg",r),t.emissiveColor=new BABYLON.Color3(1,1,1),t.specularPower=1e3,t.alpha=1,Earth.rotation.y=Math.PI,Earth.material=t,FlatEarth=BABYLON.MeshBuilder.CreateCylinder("Flatulandia",{tessellation:90,height:.002,diameter:40.008},r);var e=new BABYLON.StandardMaterial("FEMaterial",r);return e.diffuseTexture=new BABYLON.Texture("/FE.jpg",r),e.emissiveColor=new BABYLON.Color3(1,1,1),FlatEarth.material=e,FlatEarth.rotation.y=-Math.PI/2,FlatEarth.setEnabled(!1),r},scene=createScene(),arrayTrackMaterial=new BABYLON.StandardMaterial("arrayTrackMaterial",scene);arrayTrackMaterial.diffuseColor=new BABYLON.Color3(1,1,1),arrayTrackMaterial.specularColor=new BABYLON.Color3(1,1,1),arrayTrackMaterial.emissiveColor=BABYLON.Color3.White(),arrayTrackMaterial.alpha=.4,engine.runRenderLoop((function(){scene.render()}));const xAxis=new BABYLON.Vector3(1,0,0),yAxis=new BABYLON.Vector3(0,1,0),zAxis=new BABYLON.Vector3(0,0,1);function latLngToVector3(r){var a,t,e;return a=Math.cos(r.lng*Math.PI/180)*Math.cos(r.lat*Math.PI/180),e=Math.sin(r.lng*Math.PI/180)*Math.cos(r.lat*Math.PI/180),t=Math.sin(r.lat*Math.PI/180),new BABYLON.Vector3(a,t,e)}function latLngToFEVector3(r){r.lat;let a=new BABYLON.Vector3((90-r.lat)/180,0,0),t=BABYLON.Matrix.RotationAxis(yAxis,-r.lng*Math.PI/180),e=BABYLON.Vector3.TransformCoordinates(a,t);return e.x=20004*e.x*.001,e.y=.002,e.z=20004*e.z*.001,e}function arrayLatLngToArrayFEVector3(r){let a=[];for(var t=0;t<r.length;t++)a[t]=latLngToFEVector3(r[t]);return a}function vector3ToLatLng(r){var a=BABYLON.Vector3.Dot(yAxis,r),t=Math.acos(a/(yAxis.length()*r.length()));let e=180*t/Math.PI;return e=e<90?90-e:-(e-90),r.y=0,a=BABYLON.Vector3.Dot(xAxis,r),t=Math.acos(a/(xAxis.length()*r.length())),r.z<0&&(t=-t),{lat:e,lng:180*t/Math.PI}}function arrayVector3ToArrayLatLng(r){let a=[];for(i=0;i<r.length;i++)a[i]=vector3ToLatLng(r[i]);return a}function vector3ToFEVector3(r){var a=BABYLON.Vector3.Dot(yAxis,r),t=Math.acos(a/(yAxis.length()*r.length()));Math.PI;return r.y=0,a=BABYLON.Vector3.Dot(xAxis,r),t=Math.acos(a/(xAxis.length()*r.length())),r.z<0&&(t=-t),180*t/Math.PI}function arrayVector3ToArrayFEVector3(r){let a=[];for(i=0;i<r.length;i++)a[i]=vector3ToFEVector3(r[i]);return a}function angDistGreatCircle(r,a){var t,e,o,i,n;return t=r.lat*Math.PI/180,e=r.lng*Math.PI/180,o=a.lat*Math.PI/180,i=a.lng*Math.PI/180,n=Math.abs(e-i),Math.acos(Math.sin(t)*Math.sin(o)+Math.cos(t)*Math.cos(o)*Math.cos(n))}function ortodromicDistanceV(r,a){var t,e,o,i;return t=r.lat*Math.PI/180,e=r.lng*Math.PI/180,o=a.lat*Math.PI/180,i=a.lng*Math.PI/180,6371*Math.acos((Math.cos(e)*Math.cos(i)+Math.sin(e)*Math.sin(i))*Math.cos(t)*Math.cos(o)+Math.sin(t)*Math.sin(o))}function ortodromicDistanceTE(r,a){return 180*angDistGreatCircle(r,a)/Math.PI*60}function ri(r,a){var t,e,o,i,n,s;t=r.lat*Math.PI/180,e=r.lng*Math.PI/180,o=a.lat*Math.PI/180,i=a.lng*Math.PI/180,n=Math.abs(e-i),s=Math.cos(t)*(Math.tan(o)/Math.sin(n)-Math.tan(t)/Math.tan(n));let c=t*o;return c<0?NS=t<0?"N":"S":c>0&&(NS=t<0?"S":"N"),Math.abs(Math.atan(1/s))}function riAcimutal(r,a){return"E"==EW(r,a)?"N"==NS?rinicial:Math.PI-rinicial:"S"==NS?Math.PI+rinicial:2*Math.PI-rinicial}function EW(r,a){var t,e,o;return r.lat,t=r.lng,a.lat,e=a.lng,o=Math.abs(t-e),t<e?o<180?"E":"W":o<180?"W":"E"}function orthodromic(r,a){var t=latLngToVector3(r),e=latLngToVector3(a),o=BABYLON.Vector3.Cross(t,e),i=BABYLON.Vector3.Dot(t,e),n=Math.acos(i/(t.length()*e.length())),s=[];var c=Math.floor(180*n/Math.PI);c<4&&(c=4);for(var l,d,h=BABYLON.Vector3.Normalize(t).scale(6.371),m=BABYLON.Vector3.Normalize(e).scale(6.371),y=n/c,L=0;L<c;L++)l=BABYLON.Matrix.RotationAxis(o,y*L),d=BABYLON.Vector3.TransformCoordinates(h,l),s.push(d);return s.push(m),s}function loxodromic(r,a){var t=!1;let e=a.lng-r.lng;e>180&&(e=360-e,t=!0);let o=a.lat-r.lat;let i=Math.floor(Math.abs(e));i<Math.abs(o)&&(i=Math.floor(Math.abs(o))),i<4&&(i=4);let n=e/i,s=o/i;var c=[],l=[];t&&(n*=-1);let d=r.lat,h=r.lng;for(var m=0;m<i;m++)c.push({lat:d,lng:h}),l.push(latLngToVector3(c[m])),l[m].x=6371*l[m].x*.001,l[m].y=6371*l[m].y*.001,l[m].z=6371*l[m].z*.001,d+=s,h+=n;return c.push(a),l.push(latLngToVector3(a)),l[l.length-1].x=6371*l[l.length-1].x*.001,l[l.length-1].y=6371*l[l.length-1].y*.001,l[l.length-1].z=6371*l[l.length-1].z*.001,l}var PSal,PDest,pos,arrayPathLine,popupContent,NS,rinicial,mymap=L.map("mapid").setView([-36.505,-70.09],5),Sal=!1,Dest=!1,PosAxis=null,arrayTrack=[],markers=[],arrayPath=[],latSal=document.getElementById("latSalContainer"),lonSal=document.getElementById("lonSalContainer"),latDest=document.getElementById("latDestContainer"),lonDest=document.getElementById("lonDestContainer"),angDistGC=document.getElementById("angDistGreatCircleContainer"),ortodromicDistanceTEnm=document.getElementById("ortodromicDistanceTEnmContainer"),ortodromicDistanceTEkm=document.getElementById("ortodromicDistanceTEkmContainer"),ortodromicDistanceVnm=document.getElementById("ortodromicDistanceVnmContainer"),ortodromicDistanceVkm=document.getElementById("ortodromicDistanceVkmContainer"),riAz=document.getElementById("riAzContainer"),riCuadrantal=document.getElementById("riCuadContainer");const origin=new BABYLON.Vector3(0,0,0);var southWest=L.latLng(-89.999,-180),northEast=L.latLng(89.999,180),bounds=L.latLngBounds(southWest,northEast);function init(){angDistGC.innerHTML="0°",ortodromicDistanceTEnm.innerHTML="0 nm",ortodromicDistanceTEkm.innerHTML="0 km",ortodromicDistanceVnm.innerHTML="0 nm",ortodromicDistanceVkm.innerHTML="0 km"}function toGMS(r){var a,t;return t=r-(a=Math.floor(r)),a+"°"+(t=(t*=60).toFixed(2))+"'"}mymap.setMaxBounds(bounds),mymap.on("drag",(function(){mymap.panInsideBounds(bounds,{animate:!1})}));class trackPoint{constructor(r,a){if(this.id=r,this.P=a,this.vMarker=latLngToVector3(a),this.vFEMarker=latLngToFEVector3(a),this.spFEMarker=BABYLON.MeshBuilder.CreateSphere("FEarrayMarker "+this.id,{diameter:.2},scene),this.spFEMarker.material=arrayTrackMaterial,this.spFEMarker.position=this.vFEMarker,Earth.isEnabled()&&this.spFEMarker.setEnabled(!1),this.spMarker=BABYLON.MeshBuilder.CreateSphere("arrayMarker "+this.id,{diameter:.2},scene),this.spMarker.material=arrayTrackMaterial,this.spMarker.position=new BABYLON.Vector3(6371*this.vMarker.x*.001,6371*this.vMarker.y*.001,6371*this.vMarker.z*.001),FlatEarth.isEnabled()&&this.spMarker.setEnabled(!1),r>0){var t=orthodromic(arrayTrack[arrayTrack.length-1].P,this.P);arrayTrack[arrayTrack.length-1].orthodromicPoints=t,arrayTrack[arrayTrack.length-1].orthodromicLine=BABYLON.Mesh.CreateLines("ortho",t,scene),arrayTrack[arrayTrack.length-1].orthodromicLine.color=BABYLON.Color3.Green(),FlatEarth.isEnabled()&&arrayTrack[arrayTrack.length-1].orthodromicLine.setEnabled(!1),arrayTrack[arrayTrack.length-1].orthodromicPointsInLatLng=arrayVector3ToArrayLatLng(t),t=arrayLatLngToArrayFEVector3(arrayTrack[arrayTrack.length-1].orthodromicPointsInLatLng),arrayTrack[arrayTrack.length-1].orthodromicPointsFE=t,arrayTrack[arrayTrack.length-1].orthodromicLineFE=BABYLON.Mesh.CreateLines("orthoFE",t,scene),arrayTrack[arrayTrack.length-1].orthodromicLineFE.color=BABYLON.Color3.Green(),Earth.isEnabled()&&arrayTrack[arrayTrack.length-1].orthodromicLineFE.setEnabled(!1),t=loxodromic(arrayTrack[arrayTrack.length-1].P,this.P),arrayTrack[arrayTrack.length-1].loxodromicPoints=t,arrayTrack[arrayTrack.length-1].loxodromicLine=BABYLON.Mesh.CreateLines("loxo",t,scene),arrayTrack[arrayTrack.length-1].loxodromicLine.color=BABYLON.Color3.Red(),FlatEarth.isEnabled()&&arrayTrack[arrayTrack.length-1].loxodromicLine.setEnabled(!1),arrayTrack[arrayTrack.length-1].loxodromicPointsInLatLng=arrayVector3ToArrayLatLng(t),t=arrayLatLngToArrayFEVector3(arrayTrack[arrayTrack.length-1].loxodromicPointsInLatLng),arrayTrack[arrayTrack.length-1].loxodromicPointsFE=t,arrayTrack[arrayTrack.length-1].loxodromicLineFE=BABYLON.Mesh.CreateLines("loxoFE",t,scene),arrayTrack[arrayTrack.length-1].loxodromicLineFE.color=BABYLON.Color3.Red(),Earth.isEnabled()&&arrayTrack[arrayTrack.length-1].loxodromicLineFE.setEnabled(!1)}}updateTrackPoint(r,a=this.P){let t;this.P=a,this.vMarker=latLngToVector3(a),this.vFEMarker=latLngToFEVector3(a),this.spFEMarker.dispose(),this.spFEMarker=BABYLON.MeshBuilder.CreateSphere("FEarrayMarker "+this.id,{diameter:.2},scene),this.spFEMarker.material=arrayTrackMaterial,this.spFEMarker.position=this.vFEMarker,Earth.isEnabled()&&this.spFEMarker.setEnabled(!1),this.spMarker.dispose(),this.spMarker=BABYLON.MeshBuilder.CreateSphere("arrayMarker "+this.id,{diameter:.2},scene),this.spMarker.material=arrayTrackMaterial,this.spMarker.position=new BABYLON.Vector3(6371*this.vMarker.x*.001,6371*this.vMarker.y*.001,6371*this.vMarker.z*.001),FlatEarth.isEnabled()&&this.spMarker.setEnabled(!1),r!=arrayTrack.length-1&&(this.orthodromicLine.dispose(),t=orthodromic(arrayTrack[this.id].P,arrayTrack[this.id+1].P),this.orthodromicPoints=t,this.orthodromicLine=BABYLON.Mesh.CreateLines("ortho",t,scene),this.orthodromicLine.color=BABYLON.Color3.Green(),FlatEarth.isEnabled()&&this.orthodromicLine.setEnabled(!1),this.orthodromicPointsInLatLng=arrayVector3ToArrayLatLng(t),this.orthodromicLineFE.dispose(),this.orthodromicPointsFE=arrayLatLngToArrayFEVector3(this.orthodromicPointsInLatLng),this.orthodromicLineFE=BABYLON.Mesh.CreateLines("orthoFE",this.orthodromicPointsFE,scene),this.orthodromicLineFE.color=BABYLON.Color3.Green(),Earth.isEnabled()&&this.orthodromicLineFE.setEnabled(!1),this.loxodromicLine.dispose(),t=loxodromic(arrayTrack[this.id].P,arrayTrack[this.id+1].P),this.loxodromicPoints=t,this.loxodromicLine=BABYLON.Mesh.CreateLines("loxo",t,scene),this.loxodromicLine.color=BABYLON.Color3.Red(),FlatEarth.isEnabled()&&this.loxodromicLine.setEnabled(!1),this.loxodromicPointsInLatLng=arrayVector3ToArrayLatLng(t),this.loxodromicLineFE.dispose(),this.loxodromicPointsFE=arrayLatLngToArrayFEVector3(this.loxodromicPointsInLatLng),this.loxodromicLineFE=BABYLON.Mesh.CreateLines("loxoFE",this.loxodromicPointsFE,scene),this.loxodromicLineFE.color=BABYLON.Color3.Red(),Earth.isEnabled()&&this.loxodromicLineFE.setEnabled(!1)),0!=r&&(arrayTrack[this.id-1].orthodromicLine.dispose(),t=orthodromic(arrayTrack[this.id-1].P,arrayTrack[this.id].P),arrayTrack[this.id-1].ortodromicPoints=t,arrayTrack[this.id-1].orthodromicLine=BABYLON.Mesh.CreateLines("ortho",t,scene),arrayTrack[this.id-1].orthodromicLine.color=BABYLON.Color3.Green(),FlatEarth.isEnabled()&&arrayTrack[this.id-1].orthodromicLine.setEnabled(!1),arrayTrack[this.id-1].orthodromicPointsInLatLng=arrayVector3ToArrayLatLng(t),arrayTrack[this.id-1].orthodromicLineFE.dispose(),arrayTrack[this.id-1].orthodromicPointsFE=arrayLatLngToArrayFEVector3(arrayTrack[this.id-1].orthodromicPointsInLatLng),arrayTrack[this.id-1].orthodromicLineFE=BABYLON.Mesh.CreateLines("orthoFE",arrayTrack[this.id-1].orthodromicPointsFE,scene),arrayTrack[this.id-1].orthodromicLineFE.color=BABYLON.Color3.Green(),Earth.isEnabled()&&arrayTrack[this.id-1].orthodromicLineFE.setEnabled(!1),arrayTrack[this.id-1].loxodromicLine.dispose(),t=loxodromic(arrayTrack[this.id-1].P,arrayTrack[this.id].P),arrayTrack[this.id-1].loxodromicPoints=t,arrayTrack[this.id-1].loxodromicLine=BABYLON.Mesh.CreateLines("loxo",t,scene),arrayTrack[this.id-1].loxodromicLine.color=BABYLON.Color3.Red(),FlatEarth.isEnabled()&&arrayTrack[this.id-1].loxodromicLine.setEnabled(!1),arrayTrack[this.id-1].loxodromicPointsInLatLng=arrayVector3ToArrayLatLng(t),arrayTrack[this.id-1].loxodromicLineFE.dispose(),arrayTrack[this.id-1].loxodromicPointsFE=arrayLatLngToArrayFEVector3(arrayTrack[this.id-1].loxodromicPointsInLatLng),arrayTrack[this.id-1].loxodromicLineFE=BABYLON.Mesh.CreateLines("loxoFE",arrayTrack[this.id-1].loxodromicPointsFE,scene),arrayTrack[this.id-1].loxodromicLineFE.color=BABYLON.Color3.Red(),Earth.isEnabled()&&arrayTrack[this.id-1].loxodromicLineFE.setEnabled(!1))}}function clearMarker(r){mymap.removeLayer(markers[r]),markers.splice(r,1);for(var a=r;a<markers.length;a++){markers[a].options.id=markers[a].options.id-1;var t="<p>"+markers[a].options.id+"</p></br><p>"+markers[a].getLatLng()+'</p></br><button onclick="clearMarker('+markers[a].options.id+')">Clear Marker</button>';markers[a].bindPopup(t,{closeButton:!1})}r!=arrayTrack.length-1?(arrayTrack[r].orthodromicLine.dispose(),arrayTrack[r].orthodromicLineFE.dispose(),arrayTrack[r].loxodromicLine.dispose(),arrayTrack[r].loxodromicLineFE.dispose()):0!=r&&(arrayTrack[r-1].orthodromicLine.dispose(),arrayTrack[r-1].orthodromicLineFE.dispose(),arrayTrack[r-1].loxodromicLine.dispose(),arrayTrack[r-1].loxodromicLineFE.dispose()),arrayTrack[r].spMarker.dispose(),arrayTrack[r].spFEMarker.dispose(),arrayTrack.splice(r,1);for(a=r;a<arrayTrack.length;a++)arrayTrack[a].id=arrayTrack[a].id-1;r!=arrayTrack.length&&arrayTrack[r].updateTrackPoint(r),arrayPath.splice(r,1),null!=arrayPathLine&&arrayPathLine.removeFrom(mymap),arrayPathLine=L.polyline(arrayPath).addTo(mymap)}L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery ©',maxZoom:15}).addTo(mymap),mymap.doubleClickZoom.disable(),mymap.options.minZoom=2,mymap.on("dblclick",(r=>{let a=mymap.mouseEventToLatLng(r.originalEvent);if(marker=new L.marker(L.latLng(a.lat,a.lng),{draggable:"true",clickable:"true",id:arrayTrack.length}),popupContent="<p>"+marker.options.id+"</p></br><p>"+a+'</p></br><button onclick="clearMarker('+marker.options.id+')">Clear Marker</button>',marker.bindPopup(popupContent,{closeButton:!1}).openPopup(),mymap.addLayer(marker),marker.addTo(mymap),markers[markers.length]=marker,arrayPath.push(a.wrap()),null!=arrayPathLine&&arrayPathLine.removeFrom(mymap),arrayPathLine=L.polyline(arrayPath).addTo(mymap),marker.on("dragend",(function(r){var a=r.target.getLatLng();popupContent="<p>"+markers[r.target.options.id].options.id+"</p></br><p>"+a+'</p></br><button onclick="clearMarker('+markers[r.target.options.id].options.id+')">Clear Marker</button>',markers[r.target.options.id].bindPopup(popupContent,{closeButton:!1}).openPopup(),arrayPath[r.target.options.id]=a.wrap(),arrayPathLine.removeFrom(mymap),arrayPathLine=L.polyline(arrayPath).addTo(mymap),arrayTrack[r.target.options.id].P=a,arrayTrack[r.target.options.id].updateTrackPoint(r.target.options.id,a)})),arrayTrack[arrayTrack.length]=new trackPoint(arrayTrack.length,a),null!=arrayTrack[0]&&null!=arrayTrack[arrayTrack.length-1]){let r,a,t;a=arrayTrack[0].P,t=arrayTrack[arrayTrack.length-1].P,angDistGC.innerHTML=toGMS(180*angDistGreatCircle(a,t)/Math.PI),ortodromicDistanceTEnm.innerHTML=ortodromicDistanceTE(a,t).toFixed(2)+" nm",r=1.852*ortodromicDistanceTE(a,t),ortodromicDistanceTEkm.innerHTML=r.toFixed(2)+" km",r=ortodromicDistanceV(a,t)/1.852,ortodromicDistanceVnm.innerHTML=r.toFixed(2)+" nm",ortodromicDistanceVkm.innerHTML=ortodromicDistanceV(a,t).toFixed(2)+" km",rinicial=ri(a,t),riCuadrantal.innerHTML=NS+toGMS(180*rinicial/Math.PI)+EW(a,t),riAz.innerHTML=toGMS(180*riAcimutal(a,t)/Math.PI)}}));var btnMakeTrack=document.getElementById("btnMakeTrack"),btnAlternateModels=document.getElementById("btnAlternateModels"),globeModel=!0;let popup=document.querySelector(".popup-wrapper");const close=document.querySelector(".popup-close");var iarray;btnMakeTrack.onclick=function(){popup.style.display="block"},btnAlternateModels.onclick=function(){if(Earth.isEnabled()){btnAlternateModels.innerText="ver en globo",Earth.setEnabled(!1);for(var r=0;r<arrayTrack.length-1;r++)arrayTrack[r].spMarker.setEnabled(!1),arrayTrack[r].spFEMarker.setEnabled(!0),arrayTrack[r].orthodromicLine.setEnabled(!1),arrayTrack[r].orthodromicLineFE.setEnabled(!0),arrayTrack[r].loxodromicLine.setEnabled(!1),arrayTrack[r].loxodromicLineFE.setEnabled(!0);arrayTrack[arrayTrack.length-1].spMarker.setEnabled(!1),arrayTrack[arrayTrack.length-1].spFEMarker.setEnabled(!0),FlatEarth.setEnabled(!0)}else{btnAlternateModels.innerText="ver en Flatulandia",Earth.setEnabled(!0);for(r=0;r<arrayTrack.length-1;r++)arrayTrack[r].spMarker.setEnabled(!0),arrayTrack[r].spFEMarker.setEnabled(!1),arrayTrack[r].orthodromicLine.setEnabled(!0),arrayTrack[r].orthodromicLineFE.setEnabled(!1),arrayTrack[r].loxodromicLine.setEnabled(!0),arrayTrack[r].loxodromicLineFE.setEnabled(!1);arrayTrack[arrayTrack.length-1].spMarker.setEnabled(!0),arrayTrack[arrayTrack.length-1].spFEMarker.setEnabled(!1),FlatEarth.setEnabled(!1)}},close.addEventListener("click",(()=>{popup.style.display="none"}));
